diff -uNr apache-tomcat-7.0.28-src.orig/build.xml apache-tomcat-7.0.28-src/build.xml
--- apache-tomcat-7.0.28-src.orig/build.xml	2012-06-15 16:56:41.000000000 +0900
+++ apache-tomcat-7.0.28-src/build.xml	2012-06-20 17:10:37.478178590 +0900
@@ -163,6 +163,7 @@
 
   <!-- Classpaths -->
   <path id="compile.classpath">
+    <pathelement location="${ant.jar}"/>
     <pathelement location="${jdt.jar}"/>
   </path>
 
@@ -309,6 +310,7 @@
     <exclude name="org/apache/catalina/mbeans/JmxRemote*" />
     <exclude name="org/apache/catalina/tribes/**" />
     <exclude name="org/apache/naming/factory/webservices/**" />
+    <exclude name="javax/servlet/**" />
   </patternset>
 
   <patternset id="files.catalina-tribes">
@@ -439,7 +441,7 @@
   </target>
 
   <target name="validate" if="${execute.validate}"
-    depends="build-prepare,compile-prepare,download-validate"
+    depends="build-prepare,compile-prepare"
     description="Uses Checkstyle tool to perform style check for the source code">
     <!-- Required so we can cache checkstyle results -->
     <mkdir dir="${tomcat.output}/res/checkstyle"/>
@@ -551,7 +553,7 @@
     </copy>
   </target>
 
-  <target name="compile" depends="build-prepare,download-compile,compile-prepare,validate">
+  <target name="compile" depends="build-prepare,compile-prepare,validate">
     <!-- Compile internal server components -->
     <javac srcdir="java" destdir="${tomcat.classes}"
            debug="${compile.debug}"
@@ -613,7 +615,7 @@
       filesId="files.annotations-api"
       manifest="${tomcat.manifests}/annotations-api.jar.manifest" />
 
-    <!-- Servlet 3.0 Implementation JAR File -->
+    <!-- Servlet 3.0 Implementation JAR File
     <jarIt jarfile="${servlet-api.jar}"
       filesDir="${tomcat.classes}"
       filesId="files.servlet-api"
@@ -621,7 +623,7 @@
       notice="${tomcat.manifests}/servlet-api.jar.notice"
       license="${tomcat.manifests}/servlet-api.jar.license" />
 
-    <!-- JSP 2.2 Implementation JAR File -->
+    JSP 2.2 Implementation JAR File
     <jarIt jarfile="${jsp-api.jar}"
       filesDir="${tomcat.classes}"
       filesId="files.jsp-api"
@@ -629,11 +631,12 @@
       notice="${tomcat.manifests}/jsp-api.jar.notice"
       license="${tomcat.manifests}/jsp-api.jar.license" />
 
-    <!-- JSP 2.2 EL Implementation JAR File -->
+    JSP 2.2 EL Implementation JAR File
     <jarIt jarfile="${el-api.jar}"
       filesDir="${tomcat.classes}"
       filesId="files.el-api"
       manifest="${tomcat.manifests}/el-api.jar.manifest" />
+-->
 
     <!-- Bootstrap JAR File -->
     <jarIt jarfile="${bootstrap.jar}"
@@ -725,7 +728,7 @@
 
   </target>
 
-  <target name="build-docs" depends="compile-prepare" description="Builds all documentation from XML sources">
+  <target name="build-docs" unless="nobuild.docs" description="Builds all documentation from XML sources">
 
     <copy todir="${tomcat.build}/webapps">
       <fileset dir="webapps">
@@ -918,9 +921,11 @@
     <!-- Add sources for examples -->
     <antcall target="examples-sources" />
 
+<!--
     <copy file="${tomcat-dbcp.jar}" todir="${tomcat.build}/lib"
       failonerror="false"/>
     <copy file="${jdt.jar}" todir="${tomcat.build}/lib" />
+-->
 
     <!-- build the jdbc-pool jar and source jar-->
     <echo message="Building Tomcat JDBC pool libraries"/>
@@ -1105,7 +1110,7 @@
 
   </target>
 
-  <target name="test-compile" depends="compile,download-test-compile" >
+  <target name="test-compile" depends="compile" >
     <mkdir dir="${test.classes}"/>
     <!-- Compile -->
     <javac srcdir="test" destdir="${test.classes}"
